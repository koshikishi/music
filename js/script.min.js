"use strict";var menu=document.getElementById("menu"),menuList=menu.querySelector(".menu__list"),menuToggleBtn=menu.querySelector(".menu__toggle");menuToggleBtn.addEventListener("click",function(e){e.preventDefault(),menuToggle()}),window.matchMedia("(max-width: 1279px)").matches&&window.addEventListener("keydown",function(e){27===e.keyCode&&(e.preventDefault(),menu.classList.contains("menu--shown")&&menuClose())});var menuLinks=menu.querySelectorAll(".menu__link");menuLinks[0].classList.add("menu__link--active");for(var addMenuLinksClickHandler=function(t){t.addEventListener("click",function(e){e.preventDefault(),window.matchMedia("(max-width: 1279px)").matches&&menuClose(),document.getElementById(t.hash.substring(1)).scrollIntoView({behavior:"smooth"})})},i=0;i<menuLinks.length;i++)addMenuLinksClickHandler(menuLinks[i]);window.onscroll=function(){for(var e=0;e<menuLinks.length;e++)isSectionInView(document.getElementById(menuLinks[e].hash.substring(1)))&&menuLinkActive(e)};for(var videos=document.querySelectorAll(".clip__video video"),videosPlayPayse=document.querySelectorAll(".clip__playpause"),videosProgress=document.querySelectorAll(".clip__progress"),videosCurrentTime=document.querySelectorAll(".clip__time-current"),videosDuration=document.querySelectorAll(".clip__time-full"),addVideosStateHandler=function(e){e.addEventListener("play",function(){videoStateChange(e)}),e.addEventListener("pause",function(){videoStateChange(e)})},addVideosControlsHandler=function(t,e,n,i,s){t.addEventListener("loadedmetadata",function(){n.setAttribute("max",t.duration),s.textContent=timeMinSec(t.duration)}),t.addEventListener("click",function(e){e.preventDefault(),videoPlayPause(t)}),e.addEventListener("click",function(e){e.preventDefault(),videoPlayPause(t)}),t.addEventListener("timeupdate",function(){n.getAttribute("max")||n.setAttribute("max",t.duration),n.value=t.currentTime,i.textContent=timeMinSec(t.currentTime)}),0<window.navigator.userAgent.indexOf("MSIE ")||0<window.navigator.userAgent.indexOf("Trident/")?n.addEventListener("change",function(){t.currentTime=n.value}):n.addEventListener("input",function(){t.currentTime=n.value})},k=0;k<videos.length;k++)videos[k].controls=!1,addVideosStateHandler(videos[k]),addVideosControlsHandler(videos[k],videosPlayPayse[k],videosProgress[k],videosCurrentTime[k],videosDuration[k]);var slider=new Flickity(".slider__list",{wrapAround:!0,prevNextButtons:!1,pageDots:!1}),sliderDotsGroup=document.querySelector(".slider__dots"),sliderDots=window.fizzyUIUtils.makeArray(sliderDotsGroup.children);slider.on("select",function(){var e=document.querySelector(".slider__dot--active"),t=sliderDotsGroup.children[slider.selectedIndex];e.classList.remove("slider__dot--active"),t.classList.add("slider__dot--active")}),sliderDotsGroup.addEventListener("click",function(e){if(e.preventDefault(),matchesSelector(e.target,".slider__dot")){var t=sliderDots.indexOf(e.target);slider.select(t)}});var sliderPrevButton=document.querySelector(".slider__button--prev"),sliderNextButton=document.querySelector(".slider__button--next");sliderPrevButton.addEventListener("click",function(e){e.preventDefault(),slider.previous()}),sliderNextButton.addEventListener("click",function(e){e.preventDefault(),slider.next()});var historySlider=new Flickity(".history__slider",{wrapAround:!0,initialIndex:2,percentPosition:!1,prevNextButtons:!1,pageDots:!1,on:{ready:function(){this.reposition()}}});function menuToggle(){menu.classList.contains("menu--shown")?menuClose():menuOpen()}function menuOpen(){menu.classList.add("menu--shown"),menuList.classList.add("menu__list--shown")}function menuClose(){menuList.classList.remove("menu__list--shown"),menuList.offsetWidth,menuList.classList.add("menu__list--shown"),menuList.style.animationDirection="reverse",menu.classList.remove("menu--shown"),window.setTimeout(function(){menuList.classList.remove("menu__list--shown"),menuList.removeAttribute("style")},1e3)}function isSectionInView(e){var t=window.scrollY||window.pageYOffset,n=e.getBoundingClientRect().top+t;return n<=t&&t<n+e.clientHeight||t+window.innerHeight>=document.body.clientHeight}function menuLinkActive(e){menuList.querySelector(".menu__link--active").classList.remove("menu__link--active"),menuLinks[e].classList.add("menu__link--active")}function videoStateChange(e){e.paused||e.ended?e.setAttribute("data-state","pause"):e.setAttribute("data-state","play")}function videoPlayPause(e){e.paused||e.ended?e.play():e.pause()}function timeMinSec(e){var t=Math.floor(e)%60;return Math.floor(e/60)+":"+(9<t?t:"0"+t)}historySlider.on("change",function(){historySlider.reposition()});